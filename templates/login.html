{% extends "base.html" %}

{% block title %}Sign In - TMHNA Financial Intelligence Portal{% endblock %}

{% block login_content %}
<div class="login-page">
    <aside class="login-sidebar">
        <div class="login-logo">
            <div class="login-logo-icon">FI</div>
            <div class="login-logo-text">
                <div class="login-logo-title">TMHNA</div>
                <div class="login-logo-subtitle">Financial Intelligence</div>
            </div>
        </div>
        
        <div class="login-hero">
            <h1>Unified Financial Intelligence Platform</h1>
            <p>AI-powered data management and analytics across Toyota Material Handling North America's ERP landscape.</p>
        </div>
        
        <div class="login-features">
            <div class="login-feature">
                <div class="login-feature-icon">üìä</div>
                <div class="login-feature-text">
                    <h4>Multi-ERP Integration</h4>
                    <p>Unified view across SAP, JDE, and iSeries</p>
                </div>
            </div>
            <div class="login-feature">
                <div class="login-feature-icon">ü§ñ</div>
                <div class="login-feature-text">
                    <h4>AI Classification</h4>
                    <p>ML-powered GL mapping with 89% precision</p>
                </div>
            </div>
            <div class="login-feature">
                <div class="login-feature-icon">‚ö†Ô∏è</div>
                <div class="login-feature-text">
                    <h4>Anomaly Detection</h4>
                    <p>Isolation Forest flags high-risk transactions</p>
                </div>
            </div>
            <div class="login-feature">
                <div class="login-feature-icon">üîí</div>
                <div class="login-feature-text">
                    <h4>Role-Based Access</h4>
                    <p>Secure, persona-specific data filtering</p>
                </div>
            </div>
        </div>
    </aside>
    
    <main class="login-main">
        <div class="login-container">
            <div class="login-header">
                <h2>Select Your Role</h2>
                <p>Choose a persona to access the Financial Intelligence Portal</p>
            </div>
            
            <div class="persona-grid">
                {% for key, persona in personas.items() %}
                <form method="POST" action="{{ url_for('login') }}" class="persona-card">
                    <input type="hidden" name="persona" value="{{ key }}">
                    
                    <div class="persona-header">
                        <div class="persona-avatar">
                            {% if persona.role == 'Controller' %}üë©‚Äçüíº{% else %}üë®‚Äçüíª{% endif %}
                        </div>
                        <div class="persona-info">
                            <h3>{{ persona.name }}</h3>
                            <div class="persona-role">{{ persona.role }}</div>
                            <div class="persona-company">{{ persona.company }}</div>
                        </div>
                    </div>
                    
                    <div class="persona-responsibilities">
                        <h4>Key Responsibilities</h4>
                        <ul>
                            {% for responsibility in persona.responsibilities %}
                            <li>{{ responsibility }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                    
                    <button type="submit" class="persona-submit">
                        Continue as {{ persona.name.split()[0] }} ‚Üí
                    </button>
                </form>
                {% endfor %}
            </div>
        </div>
    </main>
</div>
{% endblock %}
